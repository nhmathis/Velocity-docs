<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="UrbanCode">
    <link rel="canonical" href="http://uc-doc-test.s3-website-us-east-1.amazonaws.com/deploy/701/com.ibm.edt.doc/topics/blueprint_service_database/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Modeling databases - UrbanCode Deploy</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Modeling databases with Amazon RDS", url: "#_top", children: [
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <h1 id="modeling-databases-with-amazon-rds">Modeling databases with Amazon RDS</h1>
<p>Relational database services such as Amazon Relational Database Service (RDS) provide cloud-based databases. You can model these databases in blueprints and connect applications to them.</p>
<p>In your components, create properties that refer to the address or other details about the database. For example, add component environment properties that refer to the endpoint location and port of the database. Then, you can use those properties in component processes. In this way, you provide information about the database to the application components so that when the components are installed, they can connect to the database.</p>
<p>You can model a new database or an existing database in a blueprint. Amazon RDS is the only type of database service that is supported.</p>
<ol>
<li>In the blueprint editor, from the <strong>Services</strong> drawer, drag the <strong>New RDS Instance</strong> to the blueprint to create a database, or drag an existing database to the blueprint. </li>
<li>
<p>If you are creating a database, specify the information about the database, such as the type of database and the size of the instance.The following example shows a database that is named <code>my_database</code>:</p>
<p><code>my_database:
  type: IBM::RDS::Instance
  properties:
    name: my_database
    db_instance_class: db.m1.small
    engine: mysql
    engine_version: 5.6.19a
    availability_zone: { get_param: availability_zone }
    master_username: 
    master_password: 
    vpc_security_group_ids: 
    subnet_group:
    parameter_group:</code></p>
</li>
<li>
<p>If you are creating a database, specify the security group for the database by dragging the security group from the <strong>Security</strong> drawer of the palette.The security group controls which Virtual Private Cloud (VPC) the database is created in. By default, images can access only databases that are in the same VPC.</p>
</li>
<li>From the <strong>Components</strong> drawer, add one or more components to images in the blueprint. In the blueprint, the component resources have properties that refer to the properties on the HCL® UrbanCode™ Deploy server.</li>
<li>
<p>Link the properties in the component to the properties of the database.To link a component to the <code>my_database</code> database, the code might look like the following example. In this example, the component has properties that are named <code>ClusterEndpointPort</code> and <code>ClusterEndpointAddress</code>. The component uses these property values to access the database. To provide the property values, refer to the matching property on the database resource, as in this example:</p>
<p><code>databasecomp_sw_config:
  type: IBM::UrbanCode::SoftwareConfig::UCD
  properties: 
    name: "Database-accessing component"
    component_process: deploy
    component_process_timeout: "300"
    ucd_server_url: { get_param: ucd_server_url } # these should come from resource_tree
    ucd_username: { get_param: ucd_user }
    ucd_password: { get_param: ucd_password }
    application: { get_attr: [resource_tree, application_name] }
    environment_name: { get_attr: [resource_tree, environment_name] }
    inputs:
      **endpoint\_port : \{ get\_attr: \[my\_database, endpoint\_address\] \}
      endpoint\_address : \{ get\_attr: \[my\_database, endpoint\_port\] \}**</code></p>
</li>
<li>
<p>Create a configuration file and map the types in the blueprint to the matching Amazon types.</p>
</li>
</ol>
<p>When you provision an environment from this blueprint, the component can access the database.</p>
<p><strong>Note:</strong> If you provision an environment that contains a new database and then delete the environment, the database is also deleted.</p>
<p><strong>Parent topic:</strong> <a href="../blueprint_service_ov/">Modeling software services</a></p>

  <br>
</div>

<footer class="col-md-12 wm-page-content">
      <p>
        <a href="https://github.com/IBM-UrbanCode/edit/master/docs/com.ibm.edt.doc/topics/blueprint_service_database.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
      </p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>