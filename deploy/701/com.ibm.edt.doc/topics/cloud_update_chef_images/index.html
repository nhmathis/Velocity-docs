<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="UrbanCode">
    <link rel="canonical" href="http://uc-doc-test.s3-website-us-east-1.amazonaws.com/deploy/701/com.ibm.edt.doc/topics/cloud_update_chef_images/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Updating Chef-compatible images - UrbanCode Deploy</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Updating Chef-compatible images", url: "#_top", children: [
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <h1 id="updating-chef-compatible-images">Updating Chef-compatible images</h1>
<p>If your image uses Chef recipes, after you upgrade to HCL® UrbanCode™ Deploy version 6.2.1 or later, you must manually update the Chef hook on the images in your cloud.</p>
<ol>
<li>Extract the os-chef-config-hook.tgz file. This file is provided in the heat engine installation media and is in the following location: /installation_files_location/ibm-ucd-patterns-install/engine-install/resources.</li>
<li>Create a copy of the <code>hook-chef</code> file, which is in the following directory: extracted_files/os-chef-config-hook/heat-templates/hot/software-config/elements/heat-config-chef/install.d. </li>
<li>Rename the <code>hook-chef.py</code> file that you copied as <code>chef</code>. </li>
<li>On an image that you configured for Chef, in the /var/lib/heat-config/hooks folder, replace the <code>chef</code> file with the copy that you renamed. </li>
<li>Change the permission of the new <code>chef</code> file to 0777. </li>
<li>
<p>Shut down the image with the following command: </p>
<p><code>shutdown -h now</code></p>
</li>
<li>
<p>Create an image and upload it to your cloud. For more information, see <a href="../integrate_chef_images/">Creating Chef-compatible images</a>.</p>
</li>
</ol>
<p>After you update the Chef hook, you can provision environments from blueprints that contain Chef recipes. You can also modify blueprints that contain Chef recipes to obtain the Chef validator key value without the use of a hosted file that contains the value. See <a href="../chef_validator/">Modifying blueprints to access the Chef validator key in version 6.2.1 and later</a>.</p>
<p><strong>Parent topic:</strong> <a href="../integrate_chef/">Integrating with Chef</a></p>

  <br>
</div>

<footer class="col-md-12 wm-page-content">
      <p>
        <a href="https://github.com/IBM-UrbanCode/edit/master/docs/com.ibm.edt.doc/topics/cloud_update_chef_images.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
      </p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>