<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="UrbanCode">
    <link rel="canonical" href="http://uc-doc-test.s3-website-us-east-1.amazonaws.com/deploy/701/com.ibm.edt.doc/topics/blueprint_service_dns/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Modeling DNS records - UrbanCode Deploy</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Modeling DNS records with Amazon Route 53", url: "#_top", children: [
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <h1 id="modeling-dns-records-with-amazon-route-53">Modeling DNS records with Amazon Route 53</h1>
<p>DNS (domain name service) records refer host names such as <code>www.example.com</code> to IP addresses. Amazon Route 53 can manage DNS records for your domains.</p>
<p>Register a domain name with Amazon AWS or forward your domain to the Route 53 system. Amazon Route 53 is the only DNS provider that is supported. For more information, see <a href="http://aws.amazon.com/route53/">http://aws.amazon.com/route53/</a>.</p>
<ol>
<li>
<p>In the blueprint designer, in the source code of a blueprint, create a hosted zone to contain the DNS records for your domain and specify the domain name. For a public zone, specify only the domain name, as in this example:</p>
<p><code>my-public-zone:
  type: IBM::Route53::HostedZone
  properties:
    name: www.example.com</code></p>
</li>
<li>
<p>To make the zone private, specify the VPC and region for the zone.In this case, the domain referral works only within the specified VPC. For example, the following private zone provides domain referral only to the VPC with the ID <code>vpc-123456</code>.</p>
<p><code>my-private-zone:
  type: IBM::Route53::HostedZone
  properties:
    name: www.example.com
    private_zone: True
    vpc_id: vpc-123456
    vpc_region: us-east-1</code></p>
</li>
<li>
<p>Add one or more record sets to the zone.The record set specifies the name of the domain and the target IP addresses. For example, this record set forwards requests for the domain <code>a.example.com</code> to the IP addresses <code>10.8.8.8</code> and <code>10.9.9.9</code>.</p>
<p><code>simple-record-set:
  type: IBM::Route53::RecordSet
  properties:
    name: www.example.com
    ttl: 1800
    type: A
    hosted_zone: example.com.
    resource_records:
      10.8.8.8
      10.9.9.9</code></p>
</li>
<li>
<p>To balance traffic between IP addresses, provide weight information and unique identifiers for the record sets.The weight information is relative to all of the record sets for the domain. For example, if you have two record sets with weights of 1 and 2, the record set with the weight of 1 gets one-third of the traffic. This code shows two record sets that are balanced in this way:</p>
<p>```
weighted-record-set-a:
  type: IBM::Route53::RecordSet
  properties:
    name: www.example.com
    identifier: weighted-record-set-a
    weight: 1
    type: A
    hosted_zone: example.com.
    resource_records:
      10.8.8.8</p>
<p>weighted-record-set-b:
  type: IBM::Route53::RecordSet
  properties:
    name: www.example.com
    identifier: weighted-record-set-b
    weight: 2
    type: A
    hosted_zone: example.com.
    resource_records:
      10.9.9.9
```</p>
</li>
<li>
<p>To direct traffic to different IP addresses based on location, add the region property and provide unique identifiers for the record sets.For example, this code sends traffic from the region <code>us-east-1</code> to one IP address and traffic from the region <code>us-west-1</code> to a different IP address.</p>
<p>```
latency-record-set-a:
  type: IBM::Route53::RecordSet
  properties:
    name: www.example.com
    identifier: latency-record-set-a
    region: us-east-1
    type: A
    hosted_zone: example.com.
    resource_records:
      10.8.8.8</p>
<p>latency-record-set-b:
  type: IBM::Route53::RecordSet
  properties:
    name: www.example.com
    identifier: latency-record-set-b
    region: us-west-1
    type: A
    hosted_zone: example.com.
    resource_records:
      10.9.9.9
```</p>
</li>
<li>
<p>Use the record sets to forward traffic from your domain to your servers.For example, the following code creates a record set that forwards the domain <code>www.example.com</code> to the dynamic location of the virtual image <code>my-server</code>. In this case, the resource_records property of the record set uses the IP address of the image by referring to the public_ip_address property.</p>
<p>```
my-public-zone:
  type: IBM::Route53::HostedZone
  properties:
    name: www.example.com</p>
<p>my-server:
  type: OS:Nova::Server
  properties:
    name: "My server"
    image: "my_image"
    flavor: { get_param: flavor }
    key_name: { get_param: key_name }
    availability_zone: { get_param: availability_zone }
    networks:
      - port: { get_resource: my_port }</p>
<p>my-record-set:
  type: IBM::Route53::RecordSet
  properties:
    name: www.example.com
    type: A
    hosted_zone: example.com.
    resource_records:
      - { get_attr: [my-server, public_ip_address] }
```</p>
</li>
</ol>
<p><strong>Parent topic:</strong> <a href="../blueprint_service_ov/">Modeling software services</a></p>

  <br>
</div>

<footer class="col-md-12 wm-page-content">
      <p>
        <a href="https://github.com/IBM-UrbanCode/edit/master/docs/com.ibm.edt.doc/topics/blueprint_service_dns.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
      </p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>