<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="UrbanCode">
    <link rel="canonical" href="http://uc-doc-test.s3-website-us-east-1.amazonaws.com/deploy/701/com.ibm.udeploy.doc/topics/ha_convert_server/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Converting a stand-alone server to high availability - UrbanCode Deploy</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Converting a stand-alone server to high availability", url: "#_top", children: [
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <h1 id="converting-a-stand-alone-server-to-high-availability">Converting a stand-alone server to high availability</h1>
<p>You can convert an HCL® UrbanCode™ Deploy server into the first node of a high-availability cluster.</p>
<ul>
<li>Each server in the cluster must run the same version of HCL UrbanCode Deploy.</li>
<li>Ensure that each server can connect to each other server on the network. For example, ensure that your firewall rules allow the servers to communicate over HTTPS and JMS.</li>
</ul>
<p>To convert a stand-alone server to the first node in a clustered configuration, you first move CodeStation to shared network storage, and then modify the server settings for multi-server operation.</p>
<ol>
<li>Move CodeStation to a shared storage location with a fast network connection. Because each cluster server must access the same configuration files, each server must have access to this network storage. See <a href="../arch_relocate_codestation/">Relocating CodeStation</a>.</li>
<li>
<p>Install a load balancer to send requests to the servers. The load balancer must be able to forward requests to the HTTP and HTTPS ports for the servers. For more information, see the documentation for your load balancer.</p>
<p><strong>Note:</strong> Do not configure a load balancer to distribute requests for the agent JMS communication port. To ensure agent and agent relay availability, configure them for failover.</p>
<p><strong>Important:</strong> You must configure the load balancer for session persistence, also known as session affinity.</p>
</li>
<li>
<p>Stop of the server. </p>
</li>
<li>
<p>Add the following line of code to the install_folder/conf/server/installed.properties file: </p>
<p><code>com.urbancode.ds.UDeployServer.multiserver=true</code></p>
</li>
<li>
<p>Start the server. </p>
</li>
<li>On the new cluster server, click <strong>Settings</strong> > <strong>System Settings</strong>, and set the <strong>External Agent URL</strong> and the <strong>External User URL</strong> to the URL for the load balancer. </li>
<li>Configure the license server for high availability. For information, see the Rational® Common Licensing documentation: <a href="http://www-01.ibm.com/support/knowledgecenter/SSSTWP">http://www-01.ibm.com/support/knowledgecenter/SSSTWP</a>. For high availability options for the license server, see <a href="http://www-01.ibm.com/support/docview.wss?uid=swg27036356&amp;aid=1">http://www-01.ibm.com/support/docview.wss?uid=swg27036356&amp;aid=1</a>.</li>
</ol>
<p>After you configure the server and the load balancer, you can add nodes to the cluster.</p>
<ul>
<li>Add new servers to the cluster. See <a href="../ha_add_server/">Adding servers to clusters</a>.</li>
<li>Configure agents and agent relays for failover. See <a href="../../../com.ibm.udeploy.install.doc/topics/configure_agent_failover/">Configuring agents for failover</a> and <a href="../../../com.ibm.udeploy.install.doc/topics/configure_relay_failover/">Configuring agent relays for failover</a>.</li>
</ul>
<p><strong>Parent topic:</strong> <a href="../server_install_clustered/">Setting up high-availability clusters</a></p>

  <br>
</div>

<footer class="col-md-12 wm-page-content">
      <p>
        <a href="https://github.com/IBM-UrbanCode/edit/master/docs/com.ibm.udeploy.doc/topics/ha_convert_server.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
      </p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>